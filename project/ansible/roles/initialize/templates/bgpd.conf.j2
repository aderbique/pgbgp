! AS 64512 - 65535 are private ASes, and we can map AS 645xx to 10.0.xx.1/24
route-map ALLOW-ALL permit 100

router bgp 645{{ node_id }}
  bgp router-id 10.0.{{ node_id }}.1
  neighbor peer peer-group
  neighbor peer capability dynamic
  neighbor peer route-map ALLOW-ALL in
  neighbor peer route-map ALLOW-ALL out
{% for neighbor in mapping[node_id] %}
  neighbor 192.168.24.{{ neighbor }} peer-group peer
  neighbor 192.168.24.{{ neighbor }} remote-as 645{{ neighbor }}
  neighbor 192.168.24.{{ neighbor }} description AS 645{{ neighbor }}
{% endfor %}
  network 10.0.{{ node_id }}.0/24
